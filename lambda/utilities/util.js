"use strict";
const AWS = require('aws-sdk');
const s3SigV4Client = new AWS.S3({
    signatureVersion: 'v4',
    region: process.env.S3_PERSISTENCE_REGION
});
module.exports.getS3PreSignedUrl = function getS3PreSignedUrl(s3ObjectKey) {
    const bucketName = process.env.S3_PERSISTENCE_BUCKET;
    const s3PreSignedUrl = s3SigV4Client.getSignedUrl('getObject', {
        Bucket: bucketName,
        Key: s3ObjectKey,
        Expires: 60 * 1 // the Expires is capped for 1 minute
    });
    console.log(`Util.s3PreSignedUrl: ${s3ObjectKey} URL ${s3PreSignedUrl}`);
    return s3PreSignedUrl;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRS9CLE1BQU0sYUFBYSxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQztJQUM3QixnQkFBZ0IsRUFBRSxJQUFJO0lBQ3RCLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQjtDQUM1QyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsT0FBTyxDQUFDLGlCQUFpQixHQUFHLFNBQVMsaUJBQWlCLENBQUMsV0FBZ0I7SUFFMUUsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztJQUNyRCxNQUFNLGNBQWMsR0FBRyxhQUFhLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRTtRQUMzRCxNQUFNLEVBQUUsVUFBVTtRQUNsQixHQUFHLEVBQUUsV0FBVztRQUNoQixPQUFPLEVBQUUsRUFBRSxHQUFDLENBQUMsQ0FBQyxxQ0FBcUM7S0FDdEQsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsV0FBVyxRQUFRLGNBQWMsRUFBRSxDQUFDLENBQUM7SUFDekUsT0FBTyxjQUFjLENBQUM7QUFFMUIsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQVdTID0gcmVxdWlyZSgnYXdzLXNkaycpO1xuXG5jb25zdCBzM1NpZ1Y0Q2xpZW50ID0gbmV3IEFXUy5TMyh7XG4gICAgc2lnbmF0dXJlVmVyc2lvbjogJ3Y0JyxcbiAgICByZWdpb246IHByb2Nlc3MuZW52LlMzX1BFUlNJU1RFTkNFX1JFR0lPTlxufSk7XG5cbm1vZHVsZS5leHBvcnRzLmdldFMzUHJlU2lnbmVkVXJsID0gZnVuY3Rpb24gZ2V0UzNQcmVTaWduZWRVcmwoczNPYmplY3RLZXk6IGFueSkge1xuXG4gICAgY29uc3QgYnVja2V0TmFtZSA9IHByb2Nlc3MuZW52LlMzX1BFUlNJU1RFTkNFX0JVQ0tFVDtcbiAgICBjb25zdCBzM1ByZVNpZ25lZFVybCA9IHMzU2lnVjRDbGllbnQuZ2V0U2lnbmVkVXJsKCdnZXRPYmplY3QnLCB7XG4gICAgICAgIEJ1Y2tldDogYnVja2V0TmFtZSxcbiAgICAgICAgS2V5OiBzM09iamVjdEtleSxcbiAgICAgICAgRXhwaXJlczogNjAqMSAvLyB0aGUgRXhwaXJlcyBpcyBjYXBwZWQgZm9yIDEgbWludXRlXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coYFV0aWwuczNQcmVTaWduZWRVcmw6ICR7czNPYmplY3RLZXl9IFVSTCAke3MzUHJlU2lnbmVkVXJsfWApO1xuICAgIHJldHVybiBzM1ByZVNpZ25lZFVybDtcblxufSJdfQ==